<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="./images/logo.png"/>
    <script src="./js/jquery-3.1.0.min.js"></script>
    <script src="./js/move.js"></script>
    <script src="./js/addEvent.js"></script>
    <link rel="stylesheet" href="./css/main.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/hangbanxx.css"/>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/3.0.0/css/font-awesome.min.css">
    <title>航班信息</title>
</head>
<body>
    <div class="head w">
    <div class="head-left"></div>
    <div class="head-center">
    </div>
    <div class="head-right">
        <p><span class="icon-phone" style="color: orange;"></span> 全国客服电话</p>
        <p>400-004-8888</p>
        <div class="head-right-login">
            <a href="login.html" class="head-right-login-a-1">请登录<span>|</span></a>
            <a href="zc.html" class="head-right-login-a-2">免费注册</a>
        </div>
    </div>
</div>

<div class="banner">
    <div class="banner-top">
        <div class="banner-top-center w">
            <ul class="clearfix" id="banner-top-center-ul">
                <li class="permanent"><a href="./index.html">首页</a></li>
                <li><a href="./route.html">精选路线</a></li>
                <li><a href="./strategy.html">旅游攻略</a></li>
                <li><a href="./travel-note.html">驴友游记</a></li>
                <li class="banner-top-center-ul-li-5">
                    <a href="#">关于我们</a>
                    <div class="sub-menu" id="sub-menu-id">
                        <div><a href="./present.html">公司介绍</a></div>
                        <div><a href="./contact.html">联系我们</a></div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<div id="_layout">
			<div class="jip_mian">
				<section class="container">
					<div class="top-box">
						<div class="search-main .search-main-child">
							<div class="search-div">
								<div class="s-title dflex">
									<span>国内机票</span>
								</div>
								<div class="s-sType">
									<div class="at">
										<label>
											<input name="verb" type="radio" value="" checked='checked'/>单程
										</label> 
									</div>
									<div class="at-two">
										<label>
											<input name="verb" type="radio" value="" />往返 
										</label> 
									</div>
								</div>
								<div class="s-style city-s-style">
									<div class="s-box">
										<p>出发城市<span>到达城市</span></p>
										<div class="box-input">
											<input class="input-left" id="cfd" type="text" name="become" value="上海" />
											<img src="images/hangban/jjip-logo1.jpg" onclick="exchange()" />
										    <input class="input-right" id="dz" type="text"  value="北京" "/>
										</div>
										<p>出发日期<span>返回日期</span></p>
										<div class="box-input">
											<input class="input-left" id="cfsj" type="date" name="become" />	
										    <input class="input-right" id="fanhui" type="text" name="over" placeholder="返回日期" onfocus="datefocus()" onblur="dateblur() "/>
										</div>
									</div>	
								</div>
								<button class="s-button" onclick="update(),fuzzyQuery(),judgeTime()">
									<span>
										搜索
									</span>
								</button>
							</div>
						</div>
						<div class="new_center">
							<div>
								<ul id="fff" style="width: 800px;height: 390px;overflow: hidden;">
									<li v-for='v in mydata' style="position: relative; padding: 10px;background-color: palegreen;margin-bottom: 5px;border-radius: 5px;">
										<div style="font-size: 20px">{{v.airlinecompany}}</div>
										<div style="font-size: 12px; color: blueviolet;">{{v.model}}</div>
										<div style="position: absolute; left: 200px; top: 5px;">
											<div style="font-size: 25px;">{{v.departuretime}}</div>
											<div>{{v.departureAirportName}}</div>
										</div>
										<div><img src="./images/hangban/jiantou.jpg" alt="" style="width:60px; height: 10px; position: absolute; left: 310px;top: 15px;"></div>
										<div style="position: absolute; left: 400px; top: 5px;">
											<div style="font-size: 25px;">{{v.arrivaltime}}</div>
											<div>{{v.arrivalAirportName}}</div>	
										</div>

										<div style="position: absolute;left: 520px; top: 20px; color: blueviolet;">到达准点率{{v.arrivalrate}}</div>
										<div style="position: absolute;left: 680px;top: 5px;">
											<p style="font-size: 15px;color: red;">￥:{{v.price}}</p>
											<p style="margin-left: 10px;">{{v.discount}}折</p>
										</div>
										<div style="position: absolute;right: 5px;top: 10px;width: 50px;height: 30px;background-color:orange ;border-radius: 10px;text-align: center;line-height: 30px;">订票</div>
									</li>
								</ul>

								<script src="js/vue.min.js"></script>
								
							</div>
							<div class="banner_menu">
								<a href="javascript:;" id="banner_menu4"></a>
								<a href="javascript:;" id="banner_menu3"></a>
								<a href="javascript:;" id="banner_menu2"></a>
								<a href="javascript:;" class="on" id="banner_menu1"></a>
							</div>
						</div>
					</div>
					<div class="comm-main dflex">
						<h3 class="title">机票服务</h3>
						<div class="serve-list dflex">
							<a class="serve-ft" href="#" target="_blank">
								<span>我的机票</span>
							</a>
							<div class="hxrz">
								航协认证
							</div>
							<div class="cpks">
								出票快速
							</div>
							<div class="yhxz">
								3000万+的用户选择
							</div>
						</div>
						<div class="serve-best dflex">
							<a class="serve-str" href="#" target="_blank">
								<span>飞行攻略</span>
							</a>
							<div class="thfx">
								特惠放心
							</div>
							<div class="tgbj">
								退改便捷
							</div>
							<div class="txfw">
								7×24小时贴心服务
							</div>
						</div>
					</div>
				   
		<div class="foot">
		    <div class="foot-bottom">
		        <div class="foot-bottom-one">
		            <span></span>
		        </div>
		        <div class="foot-bottom-two">
		            <p><span>Bengda</span> Design</p>
		            <p>
		                欢迎来到我们的网站，找到你喜欢的旅程！祝你有一个美好的旅途
		            </p>
		        </div>
		        <div class="foot-bottom-three">
		            <span></span>
		        </div>
		        <div class="foot-bottom-four">
		            <p>
		                <a href="#">首页</a>
		                <a href="#">关于我们</a>
		                <a href="#">联系我们</a>
		            </p>
		            <p>©2016 个人展示 版权所有</p>
		            <p>
		                <a href="#">手机版</a> |
		                <a href="#">本站由蹦达建站搭建</a> |
		                <a href="#">管理登录</a>
		            </p>
		        </div>
		    </div>
		</div>

		<script>
			var _input = document.getElementById('cfsj');
			//获取当前时间
			var date = new Date();
			var seperator = "-";
			var year = date.getFullYear();
			var month = date.getMonth() + 1;
			var strDate = date.getDate();
			if (month >= 1 && month <= 9) {
			  month = "0" + month;
			}
			if (strDate >= 0 && strDate <= 9) {
			  strDate = "0" + strDate;
			}
			//当前日期
			var currentDate = year + seperator + month + seperator + strDate; 
			//赋值给input.value
			_input.value = currentDate;

			//比较两个时间的大小
			function judgeTime(time){
				//输入时间
				var date1 = _input.value;
				//现在时间
				var date2 = currentDate;
				//判断输入时间是否晚于当前时间
				if(date1 < date2){
					alert("出发时间晚于当前时间!!");
					_input.value = currentDate;
				}
			}

			//获得焦点时 type类型为date
			function datefocus(){
				var right=document.getElementById("fanhui");
					right.type = 'date';
					right.placeholder ='';
			}
			
			//当input value为空时type改回text
			function dateblur(){
				var right=document.getElementById("fanhui");
				if(right.value == ''){
					right.type = 'text';
					right.placeholder ='返回日期';
				}
			}

			let mydata,savedata;
			$(document).ready(function () {
			  $.ajax({
			     url: "https://www.fastmock.site/mock/b10a4ba221b5816b9c9de514e6f21bd5/bengda/Flightinformation",
			     method: "post",
			     dataType: "json",
			     success: function (data) {
			      if (data) {
			        mydata = data.body.flightlist;
			        new Vue({
			           el: "#fff",
			           data: {
			             mydata: data.body.flightlist,
			           },
			         });
			       }
			    },
			    error: function () {},
			  });
			});
			
			//定义重新搜索后的页面数据 savedata
			$(document).ready(function () {
				$.ajax({
				url: "https://www.fastmock.site/mock/b10a4ba221b5816b9c9de514e6f21bd5/bengda/Flightinformation",
				method: "post",
				dataType: "json",
				success: function (data) {
					if (data) {
					savedata = data.body.flightlist;
					}
				},
				error: function () {},
				});
			});

			//出发地到达地交换
			function exchange(){
				var keyWord = document.getElementById('dz').value;
				var keyWord1 = document.getElementById('cfd').value;
				
				document.getElementById('dz').value=keyWord1;
				document.getElementById('cfd').value=keyWord;
			}

			//搜索
			function fuzzyQuery() {
				var keyWord = $("#dz").val();
				var keyWord1 = $("#cfd").val();
				var arr = [];
				for (var i = 0; i < mydata.length; i++) {
					if (mydata[i].cf.indexOf(keyWord1) >= 0) {//过滤出发地
						if (mydata[i].dd.indexOf(keyWord) >= 0) {//过滤到达地
						arr.push(mydata[i]);
						}
					}
				}
				mydata.splice(0, mydata.length, ...arr);
			}
			//重置数据
			function update() {
				mydata.splice(0, mydata.length, ...savedata);
			}
			
		</script>
		
</body>
</html>
