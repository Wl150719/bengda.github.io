<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>蹦达旅游-登录</title>
    <link rel="icon" type="image/x-icon" href="./images/logo.png"/>
    <script src="./js/jquery-3.1.0.min.js"></script>
    <script src="./js/move.js"></script>
    <script src="./js/addEvent.js"></script>
    <link rel="stylesheet" href="./css/main.css" type="text/css">
    <link rel="stylesheet" href="./css/denglu.css" type="text/css">
    <link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/3.0.0/css/font-awesome.min.css">
</head>
<body>

<div class="head w">
    <a href="index.html"><div class="head-left"></div></a>
    <div class="head-center">
        <p><span>|</span>登录中心</p>
    </div>
    <div class="head-right">
        <p><span class="icon-phone" style="color: orange;"></span> 全国客服电话</p>
        <p>400-004-8888</p>
        </div>
    </div>
</div>

<div class="login">
    <div class="login-img"></div>
    <div class="login-input">
        <div class="head">普通登录</div>
        <div id="Prompt" style="margin-left: 50px;color: red;"></div>
        <div class="error" id="login-error-id"></div>
        <div class="error-1" id="login-error-id-1">
            <span class="icon-remove-circle icon-large" style="color:orange;"></span>
        </div>

        <div class="login-form" id="login-form-id">
            <div class="text-type">
                <input type="text" name="username" id="username-id">
                <div class="hint"><span class="icon-user-md"></span> 邮箱/手机号/会员名</div>
            </div>
            <div class="text-type">
                <input type="password" name="userpasswd" id="userpasswd-id" >
                <div class="hint"><span class="icon-lock"></span> 请输入密码</div>
            </div>
            <div class="remember clearfix">
                <div class="remember-left"><input type="checkbox">记住密码</div>
                <div class="remember-right"><a href="#">忘记密码?</a></div>
            </div>
            <div class="form-submit" onclick="yancheckUserz()"><a><button id="form-submit-id" >登录</button></a></div>
        </div>

        <div class="register-link">还不是蹦达会员？<a href="zc.html">免费注册</a></div>

        <div class="other-login">
            <p>合作网站账号登录<span></span></p>
            <div class="other-login-web">
                <a href="#" class="qq"></a>
                <a href="#" class="weixin"></a>
                <a href="#" class="weibo"></a>
                <a href="#" class="zhifubao"></a>
            </div>
        </div>
    </div>
</div>

<div class="bottom">
    <div class="service">

        <ul>
            <li>
                <span class="service-one"></span>
                <p>
                    <strong>价格保证</strong><br/>
                    同类产品,保证低价
                </p>
            </li>
            <li>
                <span class="service-two"></span>
                <p>
                    <strong>价格保证</strong><br/>
                    同类产品,保证低价
                </p>
            </li>
            <li>
                <span class="service-three"></span>
                <p>
                    <strong>价格保证</strong><br/>
                    同类产品,保证低价
                </p>
            </li>
            <li>
                <span class="service-four"></span>
                <p>
                    <strong>价格保证</strong><br/>
                    同类产品,保证低价
                </p>
            </li>
        </ul>
    </div>
    <div class="other">
        <div class="other-top">
            <a href="#">关于我们</a> |
            <a href="#">联系我们</a> |
            <a href="#">网站地图</a> |
            <a href="#">酒店品牌</a> |
            <a href="#">酒店查询</a> |
            <a href="#">帮助中心</a> |
            <a href="#">友情链接</a> |
            <a href="#">诚聘英才</a> |
            <a href="#">旅游度假资质</a> |
            <a href="#">意见反馈</a> |
            <a href="#">广告业务</a>
        </div>
        <div>
            Copyright © 2016 www.bengda.com. 蹦达传播股份有限公司版权所有　沪ICP备1111111号-3　增值电信业务经营许可证编号：沪B2-20100030
        </div>
    </div>
</div>

<script src="js/cookie.js"></script>
<script>
    // 表单验证
    var Prompt = document.getElementById('Prompt');
    function m_UserAccountService(){
            // alert('请输入账号');
            Prompt.innerHTML = '请输入账号';
        }
        function passwordHashString(){
            // alert('请输入密码');
            Prompt.innerHTML = '请输入密码';
        }
        function checkPasswordHistory(){
            // alert('提示：密码为6位数字');
            Prompt.innerHTML = '提示：密码为6位数字';
        }
        function resetPasswordLoadUserAccountFromResult(){
            // alert('账号密码输入错误');
            Prompt.innerHTML = '账号密码输入错误';
        }
        function resetPassword(){
            // alert('账号输入错误');
            Prompt.innerHTML = '账号输入错误';
        }
        function LoadUserAccountFromResult(){
            // alert('密码输入错误');
            Prompt.innerHTML = '会员名或密码有误';
        }
        function LoggerFactory(){
            window.location.href="index.html";
        }
        var zusername = document.querySelector('#username-id');
        var pwd = document.querySelector('#userpasswd-id');
        var dlbtn = document.querySelector('#form-submit-id');
        dlbtn.onclick = function(){
        
    }
        function yancheckUserz(){
            // 获取用户输入的值
            var username = document.getElementById('username-id').value;
            var pwd = document.getElementById('userpasswd-id').value;

            if(username == '' && pwd ==''){
                // alert('请输入账号密码');
                Prompt.innerHTML = '请输入账号密码';
                return;//终止函数
            }
            // 判断用户是否输入
            if(username == ''){
                m_UserAccountService();
                return;
            }else if(pwd == ''){
                passwordHashString();
                return;
            }
            
            if(getCookie(username) && getCookie(username) == pwd){
                //该账号存在且密码正确
                location.href = 'index.html';
                return;
            }else{
	            fan();
	            if(n>=3){
	                checkPasswordHistory();
	                return;
	            }            	
            	 LoadUserAccountFromResult();
            }

//          // 造假数据
//          var tishiUsername = [123456,'wj123456','wsh123456',18166206391];
//          var tishiPwd = [123456,990715,154536,18166206391];
//
//          //遍历假数据数组，一一判断用户名密码是否正确
//          for(var i=0;i<=tishiUsername.length;i++){
//              if(username == tishiUsername[i] && pwd == tishiPwd[i]){
//                  // console.log(tishiUsername[i]);
//                  // console.log(tishiPwd[i]);
//                  //全部通过则定位至链接
//                  LoggerFactory();
//                  return; 
//              }
//          }
        
            // 判断用户名是否正确
            // if(username !=tishiUsername[0] && username !='wj123456' && username !='wsh123456'){
            //     resetPassword();
            //     return;
            // }
            
            // // 判断密码是否正确
            // if(pwd !='123456' && pwd !='154536' && pwd !='990715'){
            //     fan();
            //     if(n>=3){
            //         checkPasswordHistory();
            //         return;
            //     }
            //     LoadUserAccountFromResult();
            //     return;
            // }

            // alert('登陆成功');
            //验证通过跳转首页
//          resetPasswordLoadUserAccountFromResult();
//          fan();
//          if(n>=3){
//              checkPasswordHistory();
//              console.log('账号：'+tishiUsername);
//              console.log('密码：'+tishiPwd);
//              return;
//          }
        }

        //记录账户密码错误次数
        var n=0;
        function fan(){
            console.log(++n);
        }

        //按下回车键回调表单函数进行验证
        document.onkeydown=function(){
                if (event.keyCode == 13){
                    yancheckUserz();
            }
          }
        
        
        
        
 		window.onload = function () {
        (function () {
            var formId = document.getElementById("login-form-id");
            var placeInputs = formId.getElementsByClassName("text-type");
            var hints = formId.getElementsByClassName("hint");
            var errorId = document.getElementById("login-error-id");

            for (var i = 0; i < placeInputs.length; i++){
                placeInputs[i].index = i;

                placeInputs[i].firstElementChild.onfocus = function (e) {
                    hints[this.parentNode.index].style.display = "none";
                };

                placeInputs[i].firstElementChild.onblur = function (e) {
                    if (this.value == "") {
                        hints[this.parentNode.index].style.display = "block";
                    }
                };

                placeInputs[i].onclick = function (e) {
                    hints[this.index].style.display = "none";
                    this.firstElementChild.focus();
                    errorId.style.visibility = "hidden";
                };
            }
        })();

        (function () {
            var name = document.getElementById("username-id");
            var passwd = document.getElementById("userpasswd-id");
            var errorId = document.getElementById("login-error-id");
            var submitBtn = document.getElementById("form-submit-id");
            var errorId1 = document.getElementById("login-error-id-1");


            addEvent(errorId1.firstElementChild, "click", function (e) {
                this.parentNode.style.display = "none";
            });

            addEvent(submitBtn, "click", function(e){
                if (name.value == ""  || passwd.value == ""){
                    errorId.style.visibility = "visible";
                    return;
                }

                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4){
                        if (xhr.status == 200 || xhr.status == 304){
                            if (xhr.responseText == "OK"){
                                window.location.replace("./index.html");
                            } else {
                                //提示登录错误
                                errorId1.style.display = "block";
                            }
                        }
                    }
                };

                    //要指定对应的后台登录程序
                  xhr.open("post", "../test.php", true)
                  xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                  xhr.send("name=" + names.value + "&passwd=" + passwds.value);

            });
        })();
    };
</script>
</body>
</html>
